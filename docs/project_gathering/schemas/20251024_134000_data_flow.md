# ğŸ”„ Data Flow Schema: Gemini TTS Podcast Generator
Generated: 2025-10-24T13:40:00+00:00
Schema Type: Data Flow & Processing Pipeline
Analyst: Claude Code Project Gatherer
Session: October 2025 Analysis

## Complete Audio Generation Pipeline

```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â”‚                              AUDIO GENERATION PIPELINE                                â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚                                                                                       â”‚
â”‚  User Input (Text + Configuration)                                                   â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â–¼                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          PHASE 1: INPUT PROCESSING                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Parse CLI     â”‚â”€â”€â”€â”€â–¶â”‚Validate Inputâ”‚â”€â”€â”€â”€â–¶â”‚Load Config   â”‚â”€â”€â”€â”€â–¶â”‚Sanitize  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚Arguments     â”‚     â”‚              â”‚     â”‚              â”‚     â”‚Text      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Text       â”‚     â”‚ â€¢ Text len   â”‚     â”‚ â€¢ .env vars  â”‚     â”‚ â€¢ Remove â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Voice(s)   â”‚     â”‚ â€¢ Voice name â”‚     â”‚ â€¢ API key    â”‚     â”‚   specialâ”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Temp       â”‚     â”‚ â€¢ Temp range â”‚     â”‚ â€¢ Model name â”‚     â”‚   chars  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Output     â”‚     â”‚ â€¢ File path  â”‚     â”‚              â”‚     â”‚ â€¢ Escape â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        PHASE 2: SPEAKER CONFIGURATION                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Detect Mode   â”‚â”€â”€â”€â”€â–¶â”‚Parse Speakersâ”‚â”€â”€â”€â”€â–¶â”‚Map Voices    â”‚â”€â”€â”€â”€â–¶â”‚Validate  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚Config    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Single       â”‚     â”‚ Speaker 1:   â”‚     â”‚ Speaker 1    â”‚     â”‚ â€¢ Voice  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Speaker     â”‚     â”‚  "text..."   â”‚     â”‚  â†’ Zephyr    â”‚     â”‚   exists â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚ â€¢ Mappingâ”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Multi-       â”‚     â”‚ Speaker 2:   â”‚     â”‚ Speaker 2    â”‚     â”‚   valid  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Speaker     â”‚     â”‚  "text..."   â”‚     â”‚  â†’ Puck      â”‚     â”‚ â€¢ Format â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        PHASE 3: API REQUEST PREPARATION                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Build Content â”‚â”€â”€â”€â”€â–¶â”‚Configure     â”‚â”€â”€â”€â”€â–¶â”‚Set Speech    â”‚â”€â”€â”€â”€â–¶â”‚Create    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚Object        â”‚     â”‚Modalities    â”‚     â”‚Config        â”‚     â”‚Request   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ {            â”‚     â”‚ {            â”‚     â”‚ {            â”‚     â”‚ POST     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  role: "user"â”‚     â”‚  generation_ â”‚     â”‚  voice:      â”‚     â”‚  to API  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  parts: [    â”‚     â”‚   config: {  â”‚     â”‚   "Zephyr"   â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   {text:...} â”‚     â”‚    modalitiesâ”‚     â”‚  multi_spk:  â”‚     â”‚ Headers: â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ]           â”‚     â”‚    : ["audio"â”‚     â”‚   [mappings] â”‚     â”‚  â€¢ Auth  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ }            â”‚     â”‚  }           â”‚     â”‚ }            â”‚     â”‚  â€¢ Type  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚ }            â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        PHASE 4: API COMMUNICATION                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Send HTTPS    â”‚â”€â”€â”€â”€â–¶â”‚Receive Streamâ”‚â”€â”€â”€â”€â–¶â”‚Parse Responseâ”‚â”€â”€â”€â”€â–¶â”‚Extract   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚Request       â”‚     â”‚              â”‚     â”‚              â”‚     â”‚Audio     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ URL:         â”‚     â”‚ Streaming    â”‚     â”‚ JSON objects â”‚     â”‚ Base64   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  generative  â”‚     â”‚  response    â”‚     â”‚  per line    â”‚     â”‚  decode  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  language    â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  .googleapis â”‚     â”‚ Chunks of    â”‚     â”‚ {            â”‚     â”‚ audio_   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  .com/...    â”‚     â”‚  audio data  â”‚     â”‚  candidates: â”‚     â”‚  data:   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚   [{         â”‚     â”‚   bytes  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Auth:        â”‚     â”‚ Real-time    â”‚     â”‚    content:  â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Bearer      â”‚     â”‚  generation  â”‚     â”‚     {...}    â”‚     â”‚ MIME:    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  <API_KEY>   â”‚     â”‚              â”‚     â”‚   }]         â”‚     â”‚  type    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚ }            â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        PHASE 5: AUDIO PROCESSING                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Collect Audio â”‚â”€â”€â”€â”€â–¶â”‚Parse MIME    â”‚â”€â”€â”€â”€â–¶â”‚Convert Formatâ”‚â”€â”€â”€â”€â–¶â”‚Add WAV   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚Chunks        â”‚     â”‚Type          â”‚     â”‚              â”‚     â”‚Header    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Combine all  â”‚     â”‚ Detect:      â”‚     â”‚ If needed:   â”‚     â”‚ RIFF     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  received    â”‚     â”‚  â€¢ audio/wav â”‚     â”‚  â€¢ Convert   â”‚     â”‚  header  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  audio data  â”‚     â”‚  â€¢ audio/mp3 â”‚     â”‚   to WAV     â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚  â€¢ audio/ogg â”‚     â”‚  â€¢ Add PCM   â”‚     â”‚ WAVE     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Buffer in    â”‚     â”‚  â€¢ audio/    â”‚     â”‚   headers    â”‚     â”‚  format  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  memory      â”‚     â”‚   webm       â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚ 16-bit PCM   â”‚     â”‚ 24kHz    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Verify       â”‚     â”‚ Get file     â”‚     â”‚ Mono channel â”‚     â”‚  sample  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  integrity   â”‚     â”‚  extension   â”‚     â”‚              â”‚     â”‚  rate    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        PHASE 6: FILE OUTPUT                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Determine Pathâ”‚â”€â”€â”€â”€â–¶â”‚Write to File â”‚â”€â”€â”€â”€â–¶â”‚Verify Write  â”‚â”€â”€â”€â”€â–¶â”‚Return    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚Result    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Default:     â”‚     â”‚ Open file    â”‚     â”‚ Check file   â”‚     â”‚ {        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ./output/   â”‚     â”‚  in binary   â”‚     â”‚  exists      â”‚     â”‚  success â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  audio_      â”‚     â”‚  write mode  â”‚     â”‚              â”‚     â”‚  : true  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  {timestamp} â”‚     â”‚              â”‚     â”‚ Verify size  â”‚     â”‚  path:   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  .wav        â”‚     â”‚ Write audio  â”‚     â”‚  > 0 bytes   â”‚     â”‚   "..."  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚  data        â”‚     â”‚              â”‚     â”‚ }        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Or user      â”‚     â”‚              â”‚     â”‚ Check format â”‚     â”‚          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  specified   â”‚     â”‚ Close file   â”‚     â”‚  valid       â”‚     â”‚ Or error â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚     â”‚  object  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        OUTPUT: AUDIO FILE READY                                  â”‚  â”‚
â”‚  â”‚                                                                                   â”‚  â”‚
â”‚  â”‚  â€¢ File saved to disk                                                           â”‚  â”‚
â”‚  â”‚  â€¢ WAV format with proper headers                                               â”‚  â”‚
â”‚  â”‚  â€¢ 16-bit PCM, 24kHz, Mono                                                      â”‚  â”‚
â”‚  â”‚  â€¢ Ready for playback or processing                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

## Single Speaker Data Flow

```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â”‚                            SINGLE SPEAKER WORKFLOW                                    â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚                                                                                       â”‚
â”‚  Command: python3 scripts/podcast_cli.py single "Hello world!" -v Zephyr            â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â–¼                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CLI Parser (podcast_cli.py)                                                      â”‚  â”‚
â”‚  â”‚  â€¢ Parse 'single' command                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Extract text: "Hello world!"                                                 â”‚  â”‚
â”‚  â”‚  â€¢ Extract voice: "Zephyr"                                                      â”‚  â”‚
â”‚  â”‚  â€¢ Default temperature: 0.9                                                     â”‚  â”‚
â”‚  â”‚  â€¢ Default output: ./outputs/                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ GeminiTTS.generate_single_speaker()                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ 1. Validate voice name in AVAILABLE_VOICES                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 2. Create content object:                                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    {                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      role: "user",                                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      parts: [{ text: "Hello world!" }]                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    }                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 3. Configure speech:                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    {                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      voice: "Zephyr",                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      temperature: 0.9                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    }                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 4. Set modalities: ["audio"]                                                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Gemini API Client (google.genai)                                                 â”‚  â”‚
â”‚  â”‚  â€¢ client.models.generate_content_stream(...)                                   â”‚  â”‚
â”‚  â”‚  â€¢ Model: gemini-2.5-pro-preview-tts                                            â”‚  â”‚
â”‚  â”‚  â€¢ Authentication: Bearer token from API key                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Stream Response Processing                                                       â”‚  â”‚
â”‚  â”‚  for chunk in response.stream():                                                â”‚  â”‚
â”‚  â”‚    â€¢ Extract audio data from chunk                                              â”‚  â”‚
â”‚  â”‚    â€¢ Accumulate in audio_data buffer                                            â”‚  â”‚
â”‚  â”‚    â€¢ Extract MIME type from first chunk                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Audio Format Processing                                                          â”‚  â”‚
â”‚  â”‚  â€¢ save_audio_file(path, audio_data, mime_type)                                 â”‚  â”‚
â”‚  â”‚  â€¢ Convert to WAV if needed                                                     â”‚  â”‚
â”‚  â”‚  â€¢ Add WAV headers (RIFF/WAVE)                                                  â”‚  â”‚
â”‚  â”‚  â€¢ Write to file: ./outputs/zephyr_20251024_134000.wav                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Success Output                                                                   â”‚  â”‚
â”‚  â”‚  Audio saved to: ./outputs/zephyr_20251024_134000.wav                            â”‚  â”‚
â”‚  â”‚  Duration: ~2 seconds                                                           â”‚  â”‚
â”‚  â”‚  Format: WAV (16-bit PCM, 24kHz, Mono)                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

## Multi-Speaker Data Flow

```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â”‚                            MULTI-SPEAKER WORKFLOW                                     â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚                                                                                       â”‚
â”‚  Command: python3 scripts/podcast_cli.py multi "$SCRIPT" -s "Host:Zephyr" "Guest:Puck"â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â–¼                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CLI Parser (podcast_cli.py)                                                      â”‚  â”‚
â”‚  â”‚  â€¢ Parse 'multi' command                                                        â”‚  â”‚
â”‚  â”‚  â€¢ Extract script with Speaker 1: / Speaker 2: markers                          â”‚  â”‚
â”‚  â”‚  â€¢ Extract speaker mappings:                                                    â”‚  â”‚
â”‚  â”‚    - Host â†’ Zephyr                                                              â”‚  â”‚
â”‚  â”‚    - Guest â†’ Puck                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Script Parsing                                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Input script:                                                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "Host: Welcome to the show!\nGuest: Thanks for having me!"               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Parse into segments:                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   [                                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     { speaker: "Host", text: "Welcome to the show!" },                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     { speaker: "Guest", text: "Thanks for having me!" }                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   ]                                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Apply voice mappings:                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   [                                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     { speaker: "Host", voice: "Zephyr", text: "..." },                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     { speaker: "Guest", voice: "Puck", text: "..." }                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   ]                                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ GeminiTTS.generate_multi_speaker_interview()                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ 1. Validate all voices in AVAILABLE_VOICES                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 2. Create multi-speaker content:                                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    {                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      role: "user",                                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      parts: [{ text: "Full script with all speakers..." }]                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    }                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 3. Configure multi-speaker speech:                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    {                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      multi_speaker_configs: [                                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚        { speaker: "Host", voice: "Zephyr" },                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚        { speaker: "Guest", voice: "Puck" }                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      ]                                                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    }                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 4. Set modalities: ["audio"]                                                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Gemini API Processing                                                            â”‚  â”‚
â”‚  â”‚  â€¢ API receives full script with speaker markers                                â”‚  â”‚
â”‚  â”‚  â€¢ API uses multi_speaker_configs to map voices                                 â”‚  â”‚
â”‚  â”‚  â€¢ API generates natural conversation flow                                      â”‚  â”‚
â”‚  â”‚  â€¢ Streams audio with proper voice transitions                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Stream Response Processing                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Collect audio chunks from all speakers                                       â”‚  â”‚
â”‚  â”‚  â€¢ Maintain natural conversation flow                                           â”‚  â”‚
â”‚  â”‚  â€¢ Preserve voice characteristics per speaker                                   â”‚  â”‚
â”‚  â”‚  â€¢ Combine into single audio stream                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Output File Generation                                                           â”‚  â”‚
â”‚  â”‚  â€¢ ./outputs/interview_host_guest_20251024_134000.wav                            â”‚  â”‚
â”‚  â”‚  â€¢ Complete conversation with multiple voices                                   â”‚  â”‚
â”‚  â”‚  â€¢ Natural transitions between speakers                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

## REST API Data Flow

```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â”‚                            REST API WORKFLOW                                          â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚                                                                                       â”‚
â”‚  curl -X POST "https://generativelanguage.googleapis.com/..."                       â”‚
â”‚       -H "Authorization: Bearer $GEMINI_API_KEY"                                     â”‚
â”‚       -H "Content-Type: application/json"                                            â”‚
â”‚       -d '{"contents": [...], "generation_config": {...}}'                           â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â–¼                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ HTTP Request Processing                                                          â”‚  â”‚
â”‚  â”‚  â€¢ Validate Authorization header                                                â”‚  â”‚
â”‚  â”‚  â€¢ Parse JSON body                                                              â”‚  â”‚
â”‚  â”‚  â€¢ Extract contents and config                                                  â”‚  â”‚
â”‚  â”‚  â€¢ Validate against API schema                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Gemini API Processing                                                            â”‚  â”‚
â”‚  â”‚  â€¢ Process text content                                                         â”‚  â”‚
â”‚  â”‚  â€¢ Apply speech configuration                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Generate audio with specified voice(s)                                       â”‚  â”‚
â”‚  â”‚  â€¢ Stream response in real-time                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Streaming JSON Response                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Line 1: {                                                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "candidates": [{                                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     "content": {                                                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       "parts": [{                                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         "inline_data": {                                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚           "mime_type": "audio/wav",                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚           "data": "UklGRi4..." // Base64 encoded audio chunk 1             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         }                                                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       }]                                                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     }                                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   }]                                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ }                                                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Line 2: { ... audio chunk 2 ... }                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Line 3: { ... audio chunk 3 ... }                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ ...                                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Response Parsing (.tmp/parse_rest_audio.py)                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ For each JSON line:                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  1. Parse JSON object                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  2. Navigate: candidates[0].content.parts[0].inline_data                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  3. Extract base64 data                                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  4. Decode to bytes                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  5. Accumulate in buffer                                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  6. Extract MIME type from first chunk                                      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                                   â”‚
â”‚                                   â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Audio File Creation                                                              â”‚  â”‚
â”‚  â”‚  â€¢ Combine all decoded chunks                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Determine format from MIME type                                              â”‚  â”‚
â”‚  â”‚  â€¢ Save to file with appropriate extension                                      â”‚  â”‚
â”‚  â”‚  â€¢ Output: audio_20251024_134000.wav                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

## Data Structures

### Content Object Structure
```python
content = {
    "role": "user",
    "parts": [
        {
            "text": "The text to be converted to speech..."
        }
    ]
}
```

### Single Speaker Config Structure
```python
speech_config = {
    "voice": "Zephyr",          # One of AVAILABLE_VOICES
    "temperature": 0.9          # 0.0 - 1.0, controls variation
}
```

### Multi-Speaker Config Structure
```python
multi_speaker_config = {
    "multi_speaker_configs": [
        {
            "speaker": "Host",
            "voice": "Zephyr"
        },
        {
            "speaker": "Guest",
            "voice": "Puck"
        }
    ]
}
```

### Generation Config Structure
```python
generation_config = {
    "modalities": ["audio"],
    "speech": {
        "voice": "Zephyr",
        # OR
        "multi_speaker_configs": [...]
    },
    "temperature": 0.9
}
```

### API Response Structure (Streaming)
```python
response_chunk = {
    "candidates": [
        {
            "content": {
                "parts": [
                    {
                        "inline_data": {
                            "mime_type": "audio/wav",
                            "data": "UklGRi4u..."  # Base64 encoded
                        }
                    }
                ],
                "role": "model"
            },
            "finishReason": "STOP",  # Final chunk only
            "safetyRatings": [...]
        }
    ]
}
```

## Error Handling Flow

```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â”‚                              ERROR HANDLING PIPELINE                                  â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚                                                                                       â”‚
â”‚  Input Validation Errors                                                             â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Invalid voice name                                                           â”‚
â”‚     â”‚    â””â”€â–º Raise ValueError with available voices list                             â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Invalid temperature                                                          â”‚
â”‚     â”‚    â””â”€â–º Raise ValueError with valid range (0.0 - 1.0)                           â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Missing API key                                                              â”‚
â”‚     â”‚    â””â”€â–º Raise ValueError with setup instructions                                â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â””â”€â–º Invalid file path                                                            â”‚
â”‚          â””â”€â–º Raise ValueError with path requirements                                 â”‚
â”‚                                                                                       â”‚
â”‚  API Communication Errors                                                            â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Authentication failure (401)                                                 â”‚
â”‚     â”‚    â””â”€â–º Log error, suggest API key check, exit                                  â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Rate limit exceeded (429)                                                    â”‚
â”‚     â”‚    â””â”€â–º Log error, suggest retry after delay, exit                              â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Network timeout                                                              â”‚
â”‚     â”‚    â””â”€â–º Log error, suggest network check, exit                                  â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â””â”€â–º Invalid response format                                                      â”‚
â”‚          â””â”€â–º Log error, save response for debugging, exit                            â”‚
â”‚                                                                                       â”‚
â”‚  Audio Processing Errors                                                             â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Empty audio data                                                             â”‚
â”‚     â”‚    â””â”€â–º Log warning, check if generation failed, exit                           â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â”œâ”€â–º Invalid MIME type                                                            â”‚
â”‚     â”‚    â””â”€â–º Log warning, use default WAV conversion                                 â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â””â”€â–º File write failure                                                           â”‚
â”‚          â””â”€â–º Log error with file path, check permissions, exit                       â”‚
â”‚                                                                                       â”‚
â”‚  All errors include:                                                                 â”‚
â”‚    â€¢ Clear error message                                                             â”‚
â”‚    â€¢ Suggested resolution steps                                                      â”‚
â”‚    â€¢ Debug information (if available)                                                â”‚
â”‚    â€¢ Graceful exit with non-zero status code                                         â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

## Performance Characteristics

- **Single Speaker Generation**: ~2-5 seconds for short text
- **Multi-Speaker Generation**: ~5-15 seconds depending on length
- **Streaming Start**: Audio generation begins in <1 second
- **Network Overhead**: HTTPS with typical API latency
- **File I/O**: Minimal, only final write operation
- **Memory Usage**: Buffered in memory during streaming, then written
- **Audio Quality**: 16-bit PCM, 24kHz, professional quality

---

Generated by Claude Code Project Gatherer
Session: October 2025 Analysis
Data Flow: Complete End-to-End Pipeline Documentation
