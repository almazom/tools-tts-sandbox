# 🔄 Data Flow Schema: Gemini TTS Podcast Generator
Generated: 2025-10-24T13:40:00+00:00
Schema Type: Data Flow & Processing Pipeline
Analyst: Claude Code Project Gatherer
Session: October 2025 Analysis

## Complete Audio Generation Pipeline

```
┌═══════════════════════════════════════════════════════════════════════════════════════┐
│                              AUDIO GENERATION PIPELINE                                │
├═══════════════════════════════════════════════════════════════════════════════════════┤
│                                                                                       │
│  User Input (Text + Configuration)                                                   │
│     │                                                                                │
│     ▼                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                          PHASE 1: INPUT PROCESSING                               │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Parse CLI     │────▶│Validate Input│────▶│Load Config   │────▶│Sanitize  │  │  │
│  │  │Arguments     │     │              │     │              │     │Text      │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ • Text       │     │ • Text len   │     │ • .env vars  │     │ • Remove │  │  │
│  │  │ • Voice(s)   │     │ • Voice name │     │ • API key    │     │   special│  │  │
│  │  │ • Temp       │     │ • Temp range │     │ • Model name │     │   chars  │  │  │
│  │  │ • Output     │     │ • File path  │     │              │     │ • Escape │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        PHASE 2: SPEAKER CONFIGURATION                            │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Detect Mode   │────▶│Parse Speakers│────▶│Map Voices    │────▶│Validate  │  │  │
│  │  │              │     │              │     │              │     │Config    │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ Single       │     │ Speaker 1:   │     │ Speaker 1    │     │ • Voice  │  │  │
│  │  │  Speaker     │     │  "text..."   │     │  → Zephyr    │     │   exists │  │  │
│  │  │              │     │              │     │              │     │ • Mapping│  │  │
│  │  │ Multi-       │     │ Speaker 2:   │     │ Speaker 2    │     │   valid  │  │  │
│  │  │  Speaker     │     │  "text..."   │     │  → Puck      │     │ • Format │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        PHASE 3: API REQUEST PREPARATION                          │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Build Content │────▶│Configure     │────▶│Set Speech    │────▶│Create    │  │  │
│  │  │Object        │     │Modalities    │     │Config        │     │Request   │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ {            │     │ {            │     │ {            │     │ POST     │  │  │
│  │  │  role: "user"│     │  generation_ │     │  voice:      │     │  to API  │  │  │
│  │  │  parts: [    │     │   config: {  │     │   "Zephyr"   │     │          │  │  │
│  │  │   {text:...} │     │    modalities│     │  multi_spk:  │     │ Headers: │  │  │
│  │  │  ]           │     │    : ["audio"│     │   [mappings] │     │  • Auth  │  │  │
│  │  │ }            │     │  }           │     │ }            │     │  • Type  │  │  │
│  │  │              │     │ }            │     │              │     │          │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        PHASE 4: API COMMUNICATION                                │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Send HTTPS    │────▶│Receive Stream│────▶│Parse Response│────▶│Extract   │  │  │
│  │  │Request       │     │              │     │              │     │Audio     │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ URL:         │     │ Streaming    │     │ JSON objects │     │ Base64   │  │  │
│  │  │  generative  │     │  response    │     │  per line    │     │  decode  │  │  │
│  │  │  language    │     │              │     │              │     │          │  │  │
│  │  │  .googleapis │     │ Chunks of    │     │ {            │     │ audio_   │  │  │
│  │  │  .com/...    │     │  audio data  │     │  candidates: │     │  data:   │  │  │
│  │  │              │     │              │     │   [{         │     │   bytes  │  │  │
│  │  │ Auth:        │     │ Real-time    │     │    content:  │     │          │  │  │
│  │  │  Bearer      │     │  generation  │     │     {...}    │     │ MIME:    │  │  │
│  │  │  <API_KEY>   │     │              │     │   }]         │     │  type    │  │  │
│  │  │              │     │              │     │ }            │     │          │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        PHASE 5: AUDIO PROCESSING                                 │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Collect Audio │────▶│Parse MIME    │────▶│Convert Format│────▶│Add WAV   │  │  │
│  │  │Chunks        │     │Type          │     │              │     │Header    │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ Combine all  │     │ Detect:      │     │ If needed:   │     │ RIFF     │  │  │
│  │  │  received    │     │  • audio/wav │     │  • Convert   │     │  header  │  │  │
│  │  │  audio data  │     │  • audio/mp3 │     │   to WAV     │     │          │  │  │
│  │  │              │     │  • audio/ogg │     │  • Add PCM   │     │ WAVE     │  │  │
│  │  │ Buffer in    │     │  • audio/    │     │   headers    │     │  format  │  │  │
│  │  │  memory      │     │   webm       │     │              │     │          │  │  │
│  │  │              │     │              │     │ 16-bit PCM   │     │ 24kHz    │  │  │
│  │  │ Verify       │     │ Get file     │     │ Mono channel │     │  sample  │  │  │
│  │  │  integrity   │     │  extension   │     │              │     │  rate    │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        PHASE 6: FILE OUTPUT                                      │  │
│  │  ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────┐  │  │
│  │  │Determine Path│────▶│Write to File │────▶│Verify Write  │────▶│Return    │  │  │
│  │  │              │     │              │     │              │     │Result    │  │  │
│  │  │              │     │              │     │              │     │          │  │  │
│  │  │ Default:     │     │ Open file    │     │ Check file   │     │ {        │  │  │
│  │  │  ./output/   │     │  in binary   │     │  exists      │     │  success │  │  │
│  │  │  audio_      │     │  write mode  │     │              │     │  : true  │  │  │
│  │  │  {timestamp} │     │              │     │ Verify size  │     │  path:   │  │  │
│  │  │  .wav        │     │ Write audio  │     │  > 0 bytes   │     │   "..."  │  │  │
│  │  │              │     │  data        │     │              │     │ }        │  │  │
│  │  │ Or user      │     │              │     │ Check format │     │          │  │  │
│  │  │  specified   │     │ Close file   │     │  valid       │     │ Or error │  │  │
│  │  │              │     │              │     │              │     │  object  │  │  │
│  │  └──────────────┘     └──────────────┘     └──────────────┘     └──────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        OUTPUT: AUDIO FILE READY                                  │  │
│  │                                                                                   │  │
│  │  • File saved to disk                                                           │  │
│  │  • WAV format with proper headers                                               │  │
│  │  • 16-bit PCM, 24kHz, Mono                                                      │  │
│  │  • Ready for playback or processing                                             │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
└═══════════════════════════════════════════════════════════════════════════════════════┘
```

## Single Speaker Data Flow

```
┌═══════════════════════════════════════════════════════════════════════════════════════┐
│                            SINGLE SPEAKER WORKFLOW                                    │
├═══════════════════════════════════════════════════════════════════════════════════════┤
│                                                                                       │
│  Command: python3 scripts/podcast_cli.py single "Hello world!" -v Zephyr            │
│     │                                                                                │
│     ▼                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ CLI Parser (podcast_cli.py)                                                      │  │
│  │  • Parse 'single' command                                                       │  │
│  │  • Extract text: "Hello world!"                                                 │  │
│  │  • Extract voice: "Zephyr"                                                      │  │
│  │  • Default temperature: 0.9                                                     │  │
│  │  • Default output: ./outputs/                                                   │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ GeminiTTS.generate_single_speaker()                                              │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐ │  │
│  │  │ 1. Validate voice name in AVAILABLE_VOICES                                  │ │  │
│  │  │ 2. Create content object:                                                   │ │  │
│  │  │    {                                                                        │ │  │
│  │  │      role: "user",                                                          │ │  │
│  │  │      parts: [{ text: "Hello world!" }]                                      │ │  │
│  │  │    }                                                                        │ │  │
│  │  │ 3. Configure speech:                                                        │ │  │
│  │  │    {                                                                        │ │  │
│  │  │      voice: "Zephyr",                                                       │ │  │
│  │  │      temperature: 0.9                                                       │ │  │
│  │  │    }                                                                        │ │  │
│  │  │ 4. Set modalities: ["audio"]                                                │ │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Gemini API Client (google.genai)                                                 │  │
│  │  • client.models.generate_content_stream(...)                                   │  │
│  │  • Model: gemini-2.5-pro-preview-tts                                            │  │
│  │  • Authentication: Bearer token from API key                                    │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Stream Response Processing                                                       │  │
│  │  for chunk in response.stream():                                                │  │
│  │    • Extract audio data from chunk                                              │  │
│  │    • Accumulate in audio_data buffer                                            │  │
│  │    • Extract MIME type from first chunk                                         │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Audio Format Processing                                                          │  │
│  │  • save_audio_file(path, audio_data, mime_type)                                 │  │
│  │  • Convert to WAV if needed                                                     │  │
│  │  • Add WAV headers (RIFF/WAVE)                                                  │  │
│  │  • Write to file: ./outputs/zephyr_20251024_134000.wav                          │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Success Output                                                                   │  │
│  │  Audio saved to: ./outputs/zephyr_20251024_134000.wav                            │  │
│  │  Duration: ~2 seconds                                                           │  │
│  │  Format: WAV (16-bit PCM, 24kHz, Mono)                                          │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
└═══════════════════════════════════════════════════════════════════════════════════════┘
```

## Multi-Speaker Data Flow

```
┌═══════════════════════════════════════════════════════════════════════════════════════┐
│                            MULTI-SPEAKER WORKFLOW                                     │
├═══════════════════════════════════════════════════════════════════════════════════════┤
│                                                                                       │
│  Command: python3 scripts/podcast_cli.py multi "$SCRIPT" -s "Host:Zephyr" "Guest:Puck"│
│     │                                                                                │
│     ▼                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ CLI Parser (podcast_cli.py)                                                      │  │
│  │  • Parse 'multi' command                                                        │  │
│  │  • Extract script with Speaker 1: / Speaker 2: markers                          │  │
│  │  • Extract speaker mappings:                                                    │  │
│  │    - Host → Zephyr                                                              │  │
│  │    - Guest → Puck                                                               │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Script Parsing                                                                   │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐ │  │
│  │  │ Input script:                                                               │ │  │
│  │  │   "Host: Welcome to the show!\nGuest: Thanks for having me!"               │ │  │
│  │  │                                                                             │ │  │
│  │  │ Parse into segments:                                                        │ │  │
│  │  │   [                                                                         │ │  │
│  │  │     { speaker: "Host", text: "Welcome to the show!" },                     │ │  │
│  │  │     { speaker: "Guest", text: "Thanks for having me!" }                    │ │  │
│  │  │   ]                                                                         │ │  │
│  │  │                                                                             │ │  │
│  │  │ Apply voice mappings:                                                       │ │  │
│  │  │   [                                                                         │ │  │
│  │  │     { speaker: "Host", voice: "Zephyr", text: "..." },                     │ │  │
│  │  │     { speaker: "Guest", voice: "Puck", text: "..." }                       │ │  │
│  │  │   ]                                                                         │ │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ GeminiTTS.generate_multi_speaker_interview()                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐ │  │
│  │  │ 1. Validate all voices in AVAILABLE_VOICES                                  │ │  │
│  │  │ 2. Create multi-speaker content:                                            │ │  │
│  │  │    {                                                                        │ │  │
│  │  │      role: "user",                                                          │ │  │
│  │  │      parts: [{ text: "Full script with all speakers..." }]                 │ │  │
│  │  │    }                                                                        │ │  │
│  │  │ 3. Configure multi-speaker speech:                                          │ │  │
│  │  │    {                                                                        │ │  │
│  │  │      multi_speaker_configs: [                                               │ │  │
│  │  │        { speaker: "Host", voice: "Zephyr" },                                │ │  │
│  │  │        { speaker: "Guest", voice: "Puck" }                                  │ │  │
│  │  │      ]                                                                      │ │  │
│  │  │    }                                                                        │ │  │
│  │  │ 4. Set modalities: ["audio"]                                                │ │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Gemini API Processing                                                            │  │
│  │  • API receives full script with speaker markers                                │  │
│  │  • API uses multi_speaker_configs to map voices                                 │  │
│  │  • API generates natural conversation flow                                      │  │
│  │  • Streams audio with proper voice transitions                                  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Stream Response Processing                                                       │  │
│  │  • Collect audio chunks from all speakers                                       │  │
│  │  • Maintain natural conversation flow                                           │  │
│  │  • Preserve voice characteristics per speaker                                   │  │
│  │  • Combine into single audio stream                                             │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Output File Generation                                                           │  │
│  │  • ./outputs/interview_host_guest_20251024_134000.wav                            │  │
│  │  • Complete conversation with multiple voices                                   │  │
│  │  • Natural transitions between speakers                                         │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
└═══════════════════════════════════════════════════════════════════════════════════════┘
```

## REST API Data Flow

```
┌═══════════════════════════════════════════════════════════════════════════════════════┐
│                            REST API WORKFLOW                                          │
├═══════════════════════════════════════════════════════════════════════════════════════┤
│                                                                                       │
│  curl -X POST "https://generativelanguage.googleapis.com/..."                       │
│       -H "Authorization: Bearer $GEMINI_API_KEY"                                     │
│       -H "Content-Type: application/json"                                            │
│       -d '{"contents": [...], "generation_config": {...}}'                           │
│     │                                                                                │
│     ▼                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ HTTP Request Processing                                                          │  │
│  │  • Validate Authorization header                                                │  │
│  │  • Parse JSON body                                                              │  │
│  │  • Extract contents and config                                                  │  │
│  │  • Validate against API schema                                                  │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Gemini API Processing                                                            │  │
│  │  • Process text content                                                         │  │
│  │  • Apply speech configuration                                                   │  │
│  │  • Generate audio with specified voice(s)                                       │  │
│  │  • Stream response in real-time                                                 │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Streaming JSON Response                                                          │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐ │  │
│  │  │ Line 1: {                                                                   │ │  │
│  │  │   "candidates": [{                                                          │ │  │
│  │  │     "content": {                                                            │ │  │
│  │  │       "parts": [{                                                           │ │  │
│  │  │         "inline_data": {                                                    │ │  │
│  │  │           "mime_type": "audio/wav",                                         │ │  │
│  │  │           "data": "UklGRi4..." // Base64 encoded audio chunk 1             │ │  │
│  │  │         }                                                                   │ │  │
│  │  │       }]                                                                    │ │  │
│  │  │     }                                                                       │ │  │
│  │  │   }]                                                                        │ │  │
│  │  │ }                                                                           │ │  │
│  │  │                                                                             │ │  │
│  │  │ Line 2: { ... audio chunk 2 ... }                                          │ │  │
│  │  │ Line 3: { ... audio chunk 3 ... }                                          │ │  │
│  │  │ ...                                                                         │ │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Response Parsing (.tmp/parse_rest_audio.py)                                      │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐ │  │
│  │  │ For each JSON line:                                                         │ │  │
│  │  │  1. Parse JSON object                                                       │ │  │
│  │  │  2. Navigate: candidates[0].content.parts[0].inline_data                    │ │  │
│  │  │  3. Extract base64 data                                                     │ │  │
│  │  │  4. Decode to bytes                                                         │ │  │
│  │  │  5. Accumulate in buffer                                                    │ │  │
│  │  │  6. Extract MIME type from first chunk                                      │ │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
│                                   │                                                   │
│                                   ▼                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│  │ Audio File Creation                                                              │  │
│  │  • Combine all decoded chunks                                                   │  │
│  │  • Determine format from MIME type                                              │  │
│  │  • Save to file with appropriate extension                                      │  │
│  │  • Output: audio_20251024_134000.wav                                            │  │
│  └─────────────────────────────────────────────────────────────────────────────────┘  │
└═══════════════════════════════════════════════════════════════════════════════════════┘
```

## Data Structures

### Content Object Structure
```python
content = {
    "role": "user",
    "parts": [
        {
            "text": "The text to be converted to speech..."
        }
    ]
}
```

### Single Speaker Config Structure
```python
speech_config = {
    "voice": "Zephyr",          # One of AVAILABLE_VOICES
    "temperature": 0.9          # 0.0 - 1.0, controls variation
}
```

### Multi-Speaker Config Structure
```python
multi_speaker_config = {
    "multi_speaker_configs": [
        {
            "speaker": "Host",
            "voice": "Zephyr"
        },
        {
            "speaker": "Guest",
            "voice": "Puck"
        }
    ]
}
```

### Generation Config Structure
```python
generation_config = {
    "modalities": ["audio"],
    "speech": {
        "voice": "Zephyr",
        # OR
        "multi_speaker_configs": [...]
    },
    "temperature": 0.9
}
```

### API Response Structure (Streaming)
```python
response_chunk = {
    "candidates": [
        {
            "content": {
                "parts": [
                    {
                        "inline_data": {
                            "mime_type": "audio/wav",
                            "data": "UklGRi4u..."  # Base64 encoded
                        }
                    }
                ],
                "role": "model"
            },
            "finishReason": "STOP",  # Final chunk only
            "safetyRatings": [...]
        }
    ]
}
```

## Error Handling Flow

```
┌═══════════════════════════════════════════════════════════════════════════════════════┐
│                              ERROR HANDLING PIPELINE                                  │
├═══════════════════════════════════════════════════════════════════════════════════════┤
│                                                                                       │
│  Input Validation Errors                                                             │
│     │                                                                                │
│     ├─► Invalid voice name                                                           │
│     │    └─► Raise ValueError with available voices list                             │
│     │                                                                                │
│     ├─► Invalid temperature                                                          │
│     │    └─► Raise ValueError with valid range (0.0 - 1.0)                           │
│     │                                                                                │
│     ├─► Missing API key                                                              │
│     │    └─► Raise ValueError with setup instructions                                │
│     │                                                                                │
│     └─► Invalid file path                                                            │
│          └─► Raise ValueError with path requirements                                 │
│                                                                                       │
│  API Communication Errors                                                            │
│     │                                                                                │
│     ├─► Authentication failure (401)                                                 │
│     │    └─► Log error, suggest API key check, exit                                  │
│     │                                                                                │
│     ├─► Rate limit exceeded (429)                                                    │
│     │    └─► Log error, suggest retry after delay, exit                              │
│     │                                                                                │
│     ├─► Network timeout                                                              │
│     │    └─► Log error, suggest network check, exit                                  │
│     │                                                                                │
│     └─► Invalid response format                                                      │
│          └─► Log error, save response for debugging, exit                            │
│                                                                                       │
│  Audio Processing Errors                                                             │
│     │                                                                                │
│     ├─► Empty audio data                                                             │
│     │    └─► Log warning, check if generation failed, exit                           │
│     │                                                                                │
│     ├─► Invalid MIME type                                                            │
│     │    └─► Log warning, use default WAV conversion                                 │
│     │                                                                                │
│     └─► File write failure                                                           │
│          └─► Log error with file path, check permissions, exit                       │
│                                                                                       │
│  All errors include:                                                                 │
│    • Clear error message                                                             │
│    • Suggested resolution steps                                                      │
│    • Debug information (if available)                                                │
│    • Graceful exit with non-zero status code                                         │
└═══════════════════════════════════════════════════════════════════════════════════════┘
```

## Performance Characteristics

- **Single Speaker Generation**: ~2-5 seconds for short text
- **Multi-Speaker Generation**: ~5-15 seconds depending on length
- **Streaming Start**: Audio generation begins in <1 second
- **Network Overhead**: HTTPS with typical API latency
- **File I/O**: Minimal, only final write operation
- **Memory Usage**: Buffered in memory during streaming, then written
- **Audio Quality**: 16-bit PCM, 24kHz, professional quality

---

Generated by Claude Code Project Gatherer
Session: October 2025 Analysis
Data Flow: Complete End-to-End Pipeline Documentation
